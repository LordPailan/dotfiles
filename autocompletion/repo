# bash completion for repo

_repo()
{
    _get_comp_words_by_ref cur prev

    base_dir="${_REPO_AUTOCOMPLETE_BASE_DIR}"
    cur="${cur// }"
    #[ -z "${cur}" ] && return
    if [ -d "${base_dir}/${cur}" ] ; then
        COMPREPLY=$( compgen -W "${base_dir}/${cur}" )
    else
        COMPREPLY=$( compgen -W "$(fd --maxdepth 2 --type d . "${base_dir}" | grep -i "${cur}" | fzf)"  )
    fi
}
complete -F _repo repo
# ex: ts=4 sw=4 et filetype=sh
